{"version":3,"sources":["../index.js"],"names":["ScrollContainer","Component","state","container","el","findDOMNode","createContainer","props","offsets","setState","scrollContainer","children","Watch","lazy","lockWatcher","watcher","lock","unlockWatcher","unlock","initWatcher","createWatcher","destroyWatcher","destroy","isInViewport","isAboveViewport","isBelowViewport","isFullyInViewport","create","updateState","on","listeners","eventTypes","forEach","type","nextProps","off"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport scrollMonitor from 'scrollmonitor';\n\nexport const ScrollContainer = (Component) => class ScrollMonitorContainer extends React.Component {\n\tconstructor () {\n\t\tsuper();\n\n\t\tthis.state = {\n\t\t\tcontainer: null\n\t\t};\n\t}\n\n\tcomponentDidMount () {\n\t\tvar el = ReactDOM.findDOMNode(this);\n\t\tvar container = scrollMonitor.createContainer(el, this.props.offsets);\n\t\tthis.setState({\n\t\t\tscrollContainer: container\n\t\t});\n\t}\n\n\trender () {\n\t\treturn (<Component\n\t\t\tscrollContainer={this.state.scrollContainer}\n\t\t\t{...this.props}\n\t\t>\n\t\t\t{this.props.children}\n\t\t</Component>);\n\t}\n};\n\nexport const Watch = (Component, lazy = false) => class WatchedComponent extends React.Component {\n\n\tconstructor () {\n\t\tsuper();\n\n\t\tthis.state = {\n\t\t\tisInViewport: false,\n\t\t\tisAboveViewport: false,\n\t\t\tisBelowViewport: false,\n\t\t\tisFullyInViewport: false\n\t\t};\n\t}\n\n\tcreateWatcher (props) {\n\t\tvar el = ReactDOM.findDOMNode(this);\n\t\tthis.watcher = (props.scrollContainer || scrollMonitor).create(el, props.offsets);\n\n\t\tconst updateState = () => {\n\t\t\tthis.setState({\n\t\t\t\tisInViewport: this.watcher.isInViewport,\n\t\t\t\tisAboveViewport: this.watcher.isAboveViewport,\n\t\t\t\tisBelowViewport: this.watcher.isBelowViewport,\n\t\t\t\tisFullyInViewport: this.watcher.isFullyInViewport\n\t\t\t});\n\t\t};\n\n\t\tthis.watcher.on('stateChange', updateState);\n\n\t\tthis.listeners = {};\n\n\t\tscrollMonitor.eventTypes.forEach(type => {\n\t\t\tif (props[type]) {\n\t\t\t\tthis.listeners[type] = () => this.props[type](this.watcher);\n\t\t\t\tthis.watcher.on(type, this.listeners[type]);\n\t\t\t}\n\t\t});\n\n\t\tupdateState();\n\t}\n\n\tcomponentDidMount () {\n\t\tif (!lazy) {\n\t\t\tthis.createWatcher(this.props);\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps (nextProps) {\n\t\tif (this.props.scrollContainer !== nextProps.scrollContainer) {\n\t\t\tthis.watcher.destroy();\n\t\t\tthis.createWatcher(nextProps);\n\t\t}\n\n\t\tscrollMonitor.eventTypes.forEach(type => {\n\t\t\tif (nextProps[type] && !this.props[type]) {\n\t\t\t\tthis.listeners[type] = () => this.props[type](this.watcher);\n\t\t\t\tthis.watcher.on(type, this.listeners[type]);\n\t\t\t} else if (!nextProps[type] && this.props[type]) {\n\t\t\t\tthis.watcher.off(type, this.listeners[type]);\n\t\t\t}\n\t\t});\n\t}\n\n\tcomponentWillUnmount () {\n\t\tthis.watcher.destroy()\n\t}\n\n\tlockWatcher = () => {\n\t\tthis.watcher.lock();\n\t};\n\n\tunlockWatcher = () => {\n\t\tthis.watcher.unlock();\n\t};\n\n\tinitWatcher = () => {\n\t\tif (lazy && !this.watcher) {\n\t\t\tthis.createWatcher(this.props);\n\t\t}\n\t};\n\n\tdestroyWatcher = () => {\n\t\tif (lazy && this.watcher) {\n\t\t\tthis.watcher.destroy();\n\t\t}\n\t};\n\n\trender () {\n\t\treturn (<Component\n\t\t\t{...{}}\n\t\t\t{...this.props}\n\t\t\tisInViewport={this.state.isInViewport}\n\t\t\tisAboveViewport={this.state.isAboveViewport}\n\t\t\tisBelowViewport={this.state.isBelowViewport}\n\t\t\tisFullyInViewport={this.state.isFullyInViewport}\n\t\t\tlockWatcher={this.lockWatcher}\n\t\t\tunlockWatcher={this.unlockWatcher}\n\t\t\tinitWatcher={this.initWatcher}\n\t\t\tdestroyWatcher={this.destroyWatcher}\n\t\t>\n\t\t\t{this.props.children}\n\t\t</Component>);\n\t}\n};\n"]}